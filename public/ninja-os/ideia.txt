# POC: Ninja OS

Ninja OS â€” interface Mac-like que unifica atalhos e apps Ninja em um desktop responsivo acessÃ­vel pelo navegador.

---

**VisÃ£o geral:**
Ninja OS Ã© um desktop Mac-like rodando no navegador; cada app Ã© uma janela contÃªiner que carrega uma rota/pÃ¡gina especÃ­fica (via iframe ou conteÃºdo interno), aberta a partir da doca inferior e com os mesmos controles padrÃ£o (fechar, minimizar, maximizar).

**GlossÃ¡rio essencial:**
- **Ninja OS (SO web):** Interface desktop estilo macOS executada no navegador. Oferece barra superior, doca inferior e janelas.
- **App Ninja:** AplicaÃ§Ã£o/pÃ¡gina carregada dentro de uma janela do Ninja OS. 99% dos casos sÃ£o apps internos; excepcionalmente pode haver visualizaÃ§Ãµes externas via iframe/contÃªiner, mas Ã© raro.
- **Janela padrÃ£o:** ContÃªiner visual com header (botÃµes fechar/minimizar/maximizar) e Ã¡rea de conteÃºdo onde o app Ã© renderizado. Ao maximizar, deve respeitar a barra superior (encostar no topo sem sobrepor). "Always on top" sÃ³ seria considerado se respeitar a barra fosse tecnicamente impossÃ­vel.
- **Doca (dock):** Barra inferior com Ã­cones de apps. Clicar em um Ã­cone abre/ativa a janela correspondente; indicadores visuais mostram quais apps estÃ£o abertos, mesmo ocultos, jÃ¡ que sÃ³ hÃ¡ um foco ativo por vez.
- **Barra de menu (topo):** Mostra status e aÃ§Ãµes globais (tema, relÃ³gio, usuÃ¡rio). NÃ£o Ã© por app; Ã© do sistema.
- **Controle de janelas:** BotÃµes circulares (vermelho, amarelo, verde) com comportamento consistente em todos os apps.
- **Rotas/iframes:** Forma como o app Ã© carregado no contÃªiner. Apps rodam em mesmo domÃ­nio/subdomÃ­nio (redirecionamento); se houver bloqueio, contorna-se sem "gambiarras", respeitando as polÃ­ticas corretas.
- **Estado (focus/minimize/maximize):** Cada janela segue o padrÃ£o de foco, minimizar, maximizar. Apenas uma janela fica focada; a focada define o app exibido na barra superior, mas outras podem permanecer abertas/executando em segundo plano.

---

## Barra de menu superior (menu/topo)

DescriÃ§Ã£o enxuta da barra superior (menu/topo) do Ninja OS:

- **FunÃ§Ãµes principais:**
  - Alternar tema: claro | automÃ¡tico (segue sistema) | escuro.
  - RelÃ³gio: hora atual em formato HH:MM.
  - UsuÃ¡rio logado: avatar + menu de conta (trocar senha, sair).
  - App em foco: exibe o nome do app da janela ativa (ajuda a saber o contexto atual).

- **Comportamento esperado:**
  - PadrÃ£o global (nÃ£o muda por app).
  - Sempre visÃ­vel e estÃ¡vel no topo.
  - RÃ³tulos/idioma: PT-BR em todos os elementos.
  - Acesso rÃ¡pido: clique simples para trocar tema, abrir menu do usuÃ¡rio e identificar o app em uso.

---

## Doca (dock) â€” barra inferior de apps

Barra fixa no rodapÃ© (centrada) com Ã­cones de apps. Fundo translÃºcido, borda sutil e sombra ao estilo macOS.

- **InteraÃ§Ã£o dos Ã­cones:**
  - Clique simples abre/mostra a janela do app.
  - Se a janela estiver minimizada, o clique restaura; se jÃ¡ estiver visÃ­vel, apenas traz foco.
  - Ãcone "running" exibe ponto indicador sob o app ativo.
  - Hover eleva e amplia o Ã­cone (efeito bounce/zoom).
- **Comportamento visual:**
  - Ãcones com cantos arredondados e gradiente.
  - AnimaÃ§Ã£o de escala/elevaÃ§Ã£o no hover; fica centralizado no viewport.
  - Z-index alto para ficar sobre o fundo, mas abaixo da barra superior.
- **Estado/foco:**
  - A janela aberta recebe `focused`; a doca nÃ£o muda o nome do app no topo, mas aciona a janela que define o app em foco.
  - Minimizar/remove `focused`; restaurar refoca.
- **PadrÃ£o de idioma/rotulagem:**
  - TÃ­tulos/`title` dos Ã­cones em PT-BR.

---

## Janela padrÃ£o

- **O que Ã©:** ContÃªiner visual com header (botÃµes fechar/vermelho, minimizar/amarelo, maximizar/verde) e Ã¡rea de conteÃºdo onde o app Ã© renderizado.
- **Controles e estados:**
  - `visible` mostra a janela; `focused` traz para frente; `minimized` recolhe; `maximized` expande.
  - BotÃµes usam o padrÃ£o macOS e devem permanecer clicÃ¡veis em todos os estados.
- **Layout e limites:**
  - PosiÃ§Ã£o central por padrÃ£o; ao maximizar, ocupa largura total e altura atÃ© o topo da viewport, **respeitando a barra superior (menu/topo)** para que os botÃµes fiquem acessÃ­veis e nÃ£o fiquem ocultos por trÃ¡s do menu.
  - Header fixa altura e mantÃ©m tÃ­tulo + caminho (breadcrumb) do app.
- **ExperiÃªncia consistente:**
  - Idioma PT-BR em rÃ³tulos e mensagens.
  - Foco/ordem z-index compartilhados entre janelas; a janela focada define o app exibido na barra superior.

---

## Apps DisponÃ­veis

### Torre de Controle
- **Ãcone:** ğŸ§­
- **NÃ­vel mÃ­nimo:** 2 (UsuÃ¡rio)
- **DescriÃ§Ã£o:** Centraliza operaÃ§Ã£o, rotas e ferramentas em um Ãºnico lugar. Exibe favoritos e atalhos para serviÃ§os externos.

### Gerenciador de Disco RAM
- **Ãcone:** ğŸ¥·
- **NÃ­vel mÃ­nimo:** 3 (Gestor)
- **DescriÃ§Ã£o:** Permite montar/desmontar disco RAM temporÃ¡rio para builds e operaÃ§Ãµes volÃ¡teis.

### ConfiguraÃ§Ãµes do Sistema
- **Ãcone:** âš™ï¸
- **NÃ­vel mÃ­nimo:** 2 (UsuÃ¡rio)
- **DescriÃ§Ã£o:** PreferÃªncias e personalizaÃ§Ã£o do sistema, incluindo tema e opÃ§Ãµes de interface.

---

## Em desenvolvimento futuro - Backlog

### AutenticaÃ§Ã£o e PermissÃµes

#### ConcluÃ­do:
1. Login e validaÃ§Ã£o: ler `users.json`, validar email+senha (md5), carregar nÃ­vel e usuÃ¡rio corrente.
2. PersistÃªncia/localStorage: salvar usuÃ¡rio logado (`ninja_current_user`), cache opcional de usuÃ¡rios e restauraÃ§Ã£o automÃ¡tica da sessÃ£o no boot.
3. Controle de acesso por nÃ­vel: visitante (1) sÃ³ visualiza; nÃ­vel 2 apps de usuÃ¡rio; nÃ­vel 3 todos os apps.

#### Pendente:
4. Cadastro bÃ¡sico: formulÃ¡rio mÃ­nimo (nome, email, telefone, senha) gerando nÃ­vel 2; salvar no localStorage.

#### Contrato de usuÃ¡rios (referÃªncia):
```typescript
{
  nome: string;      // Pelo menos 2 nomes
  avatar: string;    // URL de imagem
  email: string;     // Com validaÃ§Ã£o de email
  telefone: string;  // PadrÃ£o de apenas nÃºmeros
  senha_md5: string; // Hash MD5 simples da senha
  nivel: number;     // 1=visitante, 2=usuÃ¡rio, 3=gestor
}
```

### Funcionalidades Planejadas

1. **PersistÃªncia no Banco de Dados**
   - Migrar usuÃ¡rios do JSON para Prisma/SQLite
   - Implementar CRUD completo de usuÃ¡rios
   - Adicionar timestamps de criaÃ§Ã£o/atualizaÃ§Ã£o

2. **Gerenciamento de Favoritos**
   - CRUD de favoritos via API
   - OrganizaÃ§Ã£o por categorias/pastas
   - Filtros avanÃ§ados e busca

3. **Apps Adicionais**
   - Terminal Web (execuÃ§Ã£o de comandos)
   - Gerenciador de Arquivos (visualizaÃ§Ã£o bÃ¡sica)
   - Dashboard de Monitoramento (grÃ¡ficos em tempo real)
   - Gerenciador de Logs (filtro e busca)

4. **Melhorias de UX**
   - Drag-and-drop de janelas
   - Redimensionamento de janelas
   - Atalhos de teclado (Cmd+W para fechar, etc.)
   - AnimaÃ§Ãµes suaves de transiÃ§Ã£o
   - Modo tela cheia

5. **IntegraÃ§Ã£o com ServiÃ§os Reais**
   - API para Cockpit (monitoramento)
   - API para Portainer (containers)
   - Webhook para notificaÃ§Ãµes
   - WebSocket para atualizaÃ§Ãµes em tempo real

---

## Arquitetura TÃ©cnica (Next.js)

### Frontend
- **Framework:** Next.js 15 com App Router
- **UI Components:** shadcn/ui (Radix UI + Tailwind CSS)
- **State Management:** Zustand + React hooks
- **Temas:** next-themes (dark/light/auto)
- **AnimaÃ§Ãµes:** Framer Motion
- **Ãcones:** Lucide React

### Backend
- **API:** Next.js API Routes
- **Banco de Dados:** SQLite via Prisma ORM
- **AutenticaÃ§Ã£o:** NextAuth.js (planejado)
- **ValidaÃ§Ã£o:** Zod

### Estrutura de Pastas

```
my-project/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ ninja-os/
â”‚       â”œâ”€â”€ data/
â”‚       â”‚   â”œâ”€â”€ apps.json
â”‚       â”‚   â”œâ”€â”€ favorites.json
â”‚       â”‚   â”œâ”€â”€ users.json
â”‚       â”‚   â””â”€â”€ img/
â”‚       â”œâ”€â”€ AGENTS.md
â”‚       â””â”€â”€ ideia.txt
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ ninja-os/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ninja-os/
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ ninja-os/
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ db.ts
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma
â””â”€â”€ worklog.md
```

---

## PrÃ³ximos Passos

1. âœ… Estrutura inicial de arquivos JSON configurada
2. ğŸ”„ ImplementaÃ§Ã£o da interface principal em React
3. â³ MigraÃ§Ã£o de componentes HTML para React/Next.js
4. â³ CriaÃ§Ã£o de APIs para gerenciamento de usuÃ¡rios
5. â³ ImplementaÃ§Ã£o de autenticaÃ§Ã£o robusta
6. â³ AdiÃ§Ã£o de novos apps e funcionalidades
7. â³ Testes e otimizaÃ§Ã£o de performance
